---
const currentLang = Astro.currentLocale || "es";
const currentPath = Astro.url.pathname;

// Generar URLs para cada idioma
function generateLanguageUrl(lang: string, currentPath: string): string {
  // Remover idioma actual de la URL
  const pathWithoutLang = currentPath.replace(/^\/(es|en|it)(\/.*)?$/, '$2') || '/';
  
  if (lang === 'es') {
    // Espa√±ol como idioma por defecto (sin prefijo)
    return pathWithoutLang;
  } else {
    // Otros idiomas con prefijo
    return `/${lang}${pathWithoutLang}`;
  }
}

const esUrl = generateLanguageUrl('es', currentPath);
const enUrl = generateLanguageUrl('en', currentPath);
const itUrl = generateLanguageUrl('it', currentPath);
---

<div class="flex gap-2">
	<a 
		href={esUrl}
		class={`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${
			currentLang === 'es' 
				? 'bg-purple-600 text-white' 
				: 'bg-purple-900/50 text-purple-200 hover:bg-purple-700 hover:text-white'
		}`}
	>
		ES
	</a>
	<a 
		href={enUrl}
		class={`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${
			currentLang === 'en' 
				? 'bg-purple-600 text-white' 
				: 'bg-purple-900/50 text-purple-200 hover:bg-purple-700 hover:text-white'
		}`}
	>
		EN
	</a>
    	<a 
		href={itUrl}
		class={`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${
			currentLang === 'it' 
				? 'bg-purple-600 text-white' 
				: 'bg-purple-900/50 text-purple-200 hover:bg-purple-700 hover:text-white'
		}`}
	>
		IT
	</a>
</div>